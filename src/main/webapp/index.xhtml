<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pm="http://primefaces.org/mobile">
     
    
     
    <h:head>
    	<title>Immobilier - JSF 2.0</title>
    </h:head>
     
    <h:body>
        <h1> Bienvenue dans notre site des commerce d'immobiliers </h1>
        <h:form class="rfrm" id="rfrm">
		  <p:panel id="rpanel" header="Inscription !!!">
		    <p:messages redisplay="false" id="messages" showDetail="true" autoUpdate="true" />
		    <h:panelGrid id="grid" columns="2" cellpadding="5">
		      <h:outputText value="Email:* " />
		      <p:inputText styleClass="email" value="#{userCtrl.user.email}" required="true" requiredMessage="Email is required">
		      </p:inputText>

		      <h:outputText value="Password:* " />
		      <p:password styleClass="pwd1" id="pwd1" value="#{userCtrl.user.password}" match="pwd2" label="Password 1" required="true" requiredMessage="Password is required" />
		
		      <h:outputText value="Password:* " />
		      <p:password styleClass="pwd2" id="pwd2" value="#{userCtrl.user.password}" label="Password" required="true" requiredMessage="Password is required" />
		
		
		
		    </h:panelGrid>
		    <p:commandButton type="button" value="DÃ©ja Inscrit?" action="#{userCtrl.goToLoginPage}" />
		    <p:commandButton value="aller vers la paage login" update="rpanel"  action="#{userCtrl.goToLoginPage}" />
		    <p:commandButton value="Sign Up" update="rpanel" validateClient="true" action="#{userCtrl.saveUser}" />
		  </p:panel>
		</h:form>
		  <h:form>            
		    <h:outputLink value="javascript:void(0)" onclick="PF('dlg').show();" title="login">
		        <p:graphicImage name="/demo/images/login.png" />
		    </h:outputLink>
		 
		    <p:growl id="growl" sticky="true" showDetail="true" life="3000" />
		 
		    <p:dialog header="Login" widgetVar="dlg" resizable="false">
		        <h:panelGrid columns="2" cellpadding="5">
		            <h:outputLabel for="username" value="Username:" />
		            <p:inputText id="username" value="#{userLoginCtrl.username}" required="true" label="username" />
		 
		            <h:outputLabel for="password" value="Password:" />
		            <p:password id="password" value="#{userLoginCtrl.password}" required="true" label="password" />
		 
		            <f:facet name="footer">
		                <p:commandButton value="Login" update="growl" actionListener="#{userLoginCtrl.login}"
		                                 oncomplete="handleLoginRequest(xhr, status, args)" />
		            </f:facet>  
		        </h:panelGrid>
		    </p:dialog>
		</h:form>
 
<script type="text/javascript">
    function handleLoginRequest(xhr, status, args) {
        if(args.validationFailed || !args.loggedIn) {
            PF('dlg').jq.effect("shake", {times:5}, 100);
        }
        else {
            PF('dlg').hide();
            $('#loginLink').fadeOut();
        }
    }
</script>
		
    </h:body>
</html>